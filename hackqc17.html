<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HackQC17Doc</title>
<link rel="stylesheet" href="https://stackedit.io/res-min/themes/base.css" />
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body><div class="container"><p>Quick Design Document</p>



<h2 id="tech-stack">Tech Stack</h2>

<ul>
<li>Database: Redis</li>
<li>Server: Simple-Web-Server without SSL</li>
<li>Front-end: Mapbox Web + Android</li>
</ul>



<h2 id="sequence-diagram">Sequence Diagram</h2>



<div class="sequence-diagram"><svg height="405" version="1.1" width="552.46875" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.25px; top: -0.1875px;"><desc>Created with RaphaÃ«l 2.1.2</desc><defs><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block"></path><marker id="raphael-marker-endblock55-obj25" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use NS1:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj31" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use NS2:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj37" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use NS3:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj43" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use NS4:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker></defs><rect x="10" y="20" width="52.53125" height="35" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="20" y="30" width="32.53125" height="15" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="36.265625" y="37.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="3.75">Front</tspan></text><rect x="10" y="350" width="52.53125" height="35" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="20" y="360" width="32.53125" height="15" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="36.265625" y="367.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="3.75">Front</tspan></text><path fill="none" stroke="#000000" d="M36.265625,55L36.265625,350" stroke-width="2" style=""></path><rect x="320.78125" y="20" width="50.84375" height="35" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="330.78125" y="30" width="30.84375" height="15" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="346.203125" y="37.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="3.75">Back</tspan></text><rect x="320.78125" y="350" width="50.84375" height="35" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="330.78125" y="360" width="30.84375" height="15" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="346.203125" y="367.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="3.75">Back</tspan></text><path fill="none" stroke="#000000" d="M346.203125,55L346.203125,350" stroke-width="2" style=""></path><rect x="46.265625" y="72.5" width="289.9375" height="15" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="191.234375" y="80" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="3.75">Where am I( Current location/ Mouse position)?</tspan></text><path fill="none" stroke="#000000" d="M36.265625,90C36.265625,90,301.34392112493515,90,341.2092117530992,90" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj25)" stroke-dasharray="0" style=""></path><rect x="366.203125" y="110" width="110.84375" height="25" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="371.203125" y="115" width="100.84375" height="15" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="421.625" y="122.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="3.75">Find nearest link</tspan></text><rect x="140.828125" y="152.5" width="100.8125" height="15" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="191.234375" y="160" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="3.75">Nearest link info</tspan></text><path fill="none" stroke="#000000" d="M346.203125,170C346.203125,170,81.12482887506485,170,41.259538246900775,170" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj31)" stroke-dasharray="6,2" style=""></path><rect x="304.953125" y="190" width="21.25" height="25" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="309.953125" y="195" width="11.25" height="15" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="315.578125" y="202.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="3.75">...</tspan></text><rect x="127.265625" y="232.5" width="127.9375" height="15" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="191.234375" y="240" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="3.75">I like/dislike this link</tspan></text><path fill="none" stroke="#000000" d="M36.265625,250C36.265625,250,301.34392112493515,250,341.2092117530992,250" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj37)" stroke-dasharray="0" style=""></path><rect x="366.203125" y="270" width="108.71875" height="25" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="371.203125" y="275" width="98.71875" height="15" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="420.5625" y="282.5" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="3.75">Update database</tspan></text><rect x="150.609375" y="312.5" width="81.25" height="15" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="191.234375" y="320" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="3.75">Update status</tspan></text><path fill="none" stroke="#000000" d="M346.203125,330C346.203125,330,81.12482887506485,330,41.259538246900775,330" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj43)" stroke-dasharray="0" style=""></path></svg></div>



<h2 id="basic-data-structure">Basic Data Structure</h2>

<ul>
<li>The position information send from <code>Front</code> to <code>Back</code>.</li>
</ul>



<pre class="prettyprint"><code class=" hljs cs">Position
    user_id:
    cur_pos: [lat, <span class="hljs-keyword">long</span>]</code></pre>

<ul>
<li>The link information returned to client.</li>
</ul>



<pre class="prettyprint"><code class=" hljs lasso"><span class="hljs-keyword">Link</span> Info
    link_id:
    num_dislikes: 
    num_likes:</code></pre>

<ul>
<li>User send like/dislike to server</li>
</ul>



<pre class="prettyprint"><code class=" hljs vbnet">User Review
    link_id:
    <span class="hljs-keyword">like</span>: <span class="hljs-literal">true</span>/<span class="hljs-literal">false</span></code></pre>

<ul>
<li>User review history</li>
</ul>



<pre class="prettyprint"><code class=" hljs r">User review history
    user_id:
    review_history:
        [ 
            link_id:
            like: true/false,
            link_id:
            like: true/false,           
            <span class="hljs-keyword">...</span>
        ]</code></pre></div></body>
</html>
