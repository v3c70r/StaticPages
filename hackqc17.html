<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HackQC17Doc</title>

<link rel="stylesheet" href="https://stackedit.io/res-min/themes/solarized-light.css" />

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</head>
<body><p>Quick Design Document</p>



<h2 id="tech-stack">Tech Stack</h2>

<ul>
<li>Database: Redis</li>
<li>Server: Simple-Web-Server without SSL</li>
<li>Front-end: Mapbox Web + Android</li>
</ul>



<h2 id="sequence-diagram">Sequence Diagram</h2>



<div class="sequence-diagram"><svg height="439.875" version="1.1" width="565.3125" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="overflow: hidden; position: relative; left: -0.25px; top: 0.8125px;"><desc>Created with RaphaÃ«l 2.1.2</desc><defs><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block"></path><marker id="raphael-marker-endblock55-obj69" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use NS1:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj75" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use NS2:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj81" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use NS3:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker><marker id="raphael-marker-endblock55-obj87" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use NS4:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none"></use></marker></defs><rect x="10" y="20" width="54.03125" height="38.875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="20" y="30" width="34.03125" height="18.875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="37.015625" y="39.4375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.328125">Front</tspan></text><rect x="10" y="381" width="54.03125" height="38.875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="20" y="391" width="34.03125" height="18.875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="37.015625" y="400.4375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.328125">Front</tspan></text><path fill="none" stroke="#000000" d="M37.015625,58.875L37.015625,381" stroke-width="2" style=""></path><rect x="326.5" y="20" width="50.78125" height="38.875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="336.5" y="30" width="30.78125" height="18.875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="351.890625" y="39.4375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.328125">Back</tspan></text><rect x="326.5" y="381" width="50.78125" height="38.875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="336.5" y="391" width="30.78125" height="18.875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="351.890625" y="400.4375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.328125">Back</tspan></text><path fill="none" stroke="#000000" d="M351.890625,58.875L351.890625,381" stroke-width="2" style=""></path><rect x="47.015625" y="74.4375" width="294.875" height="18.875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="194.453125" y="83.875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.328125">Where am I( Current location/ Mouse position)?</tspan></text><path fill="none" stroke="#000000" d="M37.015625,97.75C37.015625,97.75,306.6012336909771,97.75,346.8811146770313,97.75" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj69)" stroke-dasharray="0" style=""></path><rect x="371.890625" y="117.75" width="114.1875" height="28.875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="376.890625" y="122.75" width="104.1875" height="18.875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="428.984375" y="132.1875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.328125">Find nearest link</tspan></text><rect x="143.234375" y="162.1875" width="102.4375" height="18.875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="194.453125" y="171.625" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.328125">Nearest link info</tspan></text><path fill="none" stroke="#000000" d="M351.890625,185.5C351.890625,185.5,82.3050163090229,185.5,42.02513532296871,185.5" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj75)" stroke-dasharray="6,2" style=""></path><rect x="310.671875" y="205.5" width="21.21875" height="28.875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="315.671875" y="210.5" width="11.21875" height="18.875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="321.28125" y="219.9375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.328125">...</tspan></text><rect x="145.453125" y="249.9375" width="98" height="18.875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="194.453125" y="259.375" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.328125">Link judgement</tspan></text><path fill="none" stroke="#000000" d="M37.015625,273.25C37.015625,273.25,306.6012336909771,273.25,346.8811146770313,273.25" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj81)" stroke-dasharray="0" style=""></path><rect x="371.890625" y="293.25" width="118.03125" height="28.875" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style=""></rect><rect x="376.890625" y="298.25" width="108.03125" height="18.875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="430.90625" y="307.6875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.328125">Update database</tspan></text><rect x="150.390625" y="337.6875" width="88.125" height="18.875" rx="0" ry="0" fill="#ffffff" stroke="none" style=""></rect><text x="194.453125" y="347.125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none" fill="#000000" style="text-anchor: middle; font-family: 'Andale Mono', monospace; font-size: 16px;"><tspan dy="5.328125">Update status</tspan></text><path fill="none" stroke="#000000" d="M351.890625,361C351.890625,361,82.3050163090229,361,42.02513532296871,361" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj87)" stroke-dasharray="6,2" style=""></path></svg></div>



<h2 id="apis">APIs</h2>

<p>POST: <br>
    <a href="http://localhost:8080/updateLink">http://localhost:8080/updateLink</a> <br>
Data:</p>

<pre class="prettyprint"><code class=" hljs json">{
    "<span class="hljs-attribute">link_id</span>": <span class="hljs-value"><span class="hljs-number">1024</span></span>, 
    "<span class="hljs-attribute">num_dangeours</span>": <span class="hljs-value">[<span class="hljs-number">1</span>|<span class="hljs-number">0</span>]</span>, 
    "<span class="hljs-attribute">num_damaged</span>": <span class="hljs-value">[<span class="hljs-number">1</span>|<span class="hljs-number">0</span>]</span>,
    "<span class="hljs-attribute">num_likes</span>": <span class="hljs-value">[<span class="hljs-number">1</span>|<span class="hljs-number">0</span>]</span>,
}</code></pre>

<p>GET: <br>
                              <a href="http://10.128.165.20:8080/companyRank/[activity_pt/env_pts/fidelity_pts/data_collect_pts]">http://10.128.165.20:8080/companyRank/[activity_pt/env_pts/fidelity_pts/data_collect_pts]</a> <br>
<a href="http://10.128.165.20:8080/getLink/">http://10.128.165.20:8080/getLink/</a></p>

<h2 id="basic-data-structure">Basic Data Structure</h2>

<ul>
<li>The position information send from <code>Front</code> to <code>Back</code>.</li>
</ul>

<pre class="prettyprint"><code class=" hljs cs">Position
    user_id:
    cur_pos: [lat, <span class="hljs-keyword">long</span>]</code></pre>

<ul>
<li>The link information returned to client.</li>
</ul>



<pre class="prettyprint"><code class=" hljs lasso"><span class="hljs-keyword">Link</span> Info
    link_id:
    num_dangeours: 
    num_damaged:
    num_likes:</code></pre>

<ul>
<li>User send like/dislike to server</li>
</ul>



<pre class="prettyprint"><code class=" hljs vbnet">User Review
    link_id:
    <span class="hljs-keyword">like</span>: <span class="hljs-literal">true</span>/<span class="hljs-literal">false</span></code></pre>

<ul>
<li>User review history</li>
</ul>



<pre class="prettyprint"><code class=" hljs bash">User review history
    user_id:
    review_history:
        [ 
            &lt;Link Info&gt; <span class="hljs-comment"># Refer to above</span>
        ]</code></pre></body>
</html>
